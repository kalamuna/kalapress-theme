jQuery(document).ready(function($) {
    $(".mobile-menu-close, .mobile-menu-toggle").click(function() {
        $("body").toggleClass("mobile-menu-active");
    });
    $(".mobile-menu-overlay").click(function() {
        $("body").removeClass("mobile-menu-active");
    });
});

jQuery(document).ready(function($) {
    $(document).keyup(function(e) {
        if (e.keyCode === 27) {
            $("header").removeClass("search-active");
        }
        if (e.keyCode === 13 && $("header").hasClass("search-active")) {
            if (window.matchMedia("(min-width: 992px)").matches) {
                $("header .search-button").click();
            } else {
                $("header .mobile-search-widget .search-button").click();
            }
        }
    });
    $("html").click(function(e) {
        if ($("header").hasClass("search-active")) {
            if (!$(e.target).hasClass("search-widget") && !$(".search-widget").has(e.target).length && (!$(e.target).hasClass("mobile-search-widget") && !$(".mobile-search-widget").has(e.target).length)) {
                $("header").removeClass("search-active");
            }
        }
    });
    $("header .search-button:not(.mobile-search-button)").click(function() {
        if ($("header").hasClass("search-active")) {
            if (window.matchMedia("(min-width: 992px)").matches) {
                if ($.trim($("header .search-input").val()).length !== 0) {
                    window.location.href = "/?s=" + $("header .search-input").val();
                } else {
                    $("header .search-widget").addClass("shake");
                    setTimeout(function() {
                        $("header .search-widget").removeClass("shake");
                    }, 830);
                }
            } else {
                $("header").removeClass("search-active");
            }
        } else {
            $("header").addClass("search-active");
            $("header .search-input").focus();
        }
    });
    $("header .mobile-search-button").click(function() {
        if ($.trim($("header .mobile-search-input").val()).length !== 0) {
            window.location.href = "/?s=" + $("header .mobile-search-input").val();
        } else {
            $("header .mobile-search-widget-inner").addClass("shake");
            setTimeout(function() {
                $("header .mobile-search-widget-inner").removeClass("shake");
            }, 830);
        }
    });
    $(".mobile-menu .menu .menu-item a").click(function(e) {
        e.preventDefault();
        console.log("1");
        if ($(this).parent().hasClass("menu-item-is-open")) {
            console.log("2");
            $(this).parent().children(".sub-menu").slideUp("fast");
        } else {
            $(this).parent().children(".sub-menu").slideDown("fast");
        }
        $(this).parent().toggleClass("menu-item-is-open");
    });
});